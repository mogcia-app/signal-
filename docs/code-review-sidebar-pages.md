# サイドバーリンクページ コードレビュー

作成日: 2026-01-30

## 概要

サイドバーにリンクされている各ページの残りの改善点と修正箇所をまとめました。

---

## 1. ホームページ (`/home`)

**ファイル**: `src/app/home/page.tsx`

### 残りの改善点
---

## 2. 運用計画ページ (`/instagram/plan`)

**ファイル**: `src/app/instagram/plan/page.tsx`

### 残りの改善点
---

## 3. フィード投稿ラボ (`/instagram/lab/feed`)

**ファイル**: `src/app/instagram/lab/feed/page.tsx`

### 残りの改善点

---

## 4. リール投稿ラボ (`/instagram/lab/reel`)

**ファイル**: `src/app/instagram/lab/reel/page.tsx`

---

## 5. ストーリー投稿ラボ (`/instagram/lab/story`)

**ファイル**: `src/app/instagram/lab/story/page.tsx`

### 残りの改善点
---

## 6. 投稿一覧ページ (`/instagram/posts`)

**ファイル**: `src/app/instagram/posts/page.tsx`

### 残りの改善点

---

## 7. 月次レポートページ (`/instagram/report`)

**ファイル**: `src/app/instagram/report/page.tsx`

### 残りの改善点

---

## 8. KPIコンソールページ (`/instagram/kpi`)

**ファイル**: `src/app/instagram/kpi/page.tsx`

### 残りの改善点


---

## 9. 学習ダッシュボード (`/learning`)

**ファイル**: `src/app/learning/page.tsx`

### 残りの改善点

---

## 共通の問題点と改善提案

### 1. 型安全性の向上
**問題**: `any`型、`Record<string, unknown>`の多用、`unknown`型の多用

**解決策**:
- 適切な型定義の追加
- TypeScriptのstrictモードの有効化
- 型ユーティリティの活用
- 型ガード関数の導入

### 2. エラーハンドリングの統一
**問題**: 一部のページではまだ個別のエラーハンドリングが残っている可能性

**今後の改善**:
- 残りのページでも共通の`handleError`関数を使用する（`src/utils/error-handling.ts`）
- エラーバウンダリーの導入を検討
- ユーザーフレンドリーなエラーメッセージの統一

### 3. パフォーマンス最適化
**問題**: データ取得、レンダリングの最適化が不十分

**解決策**:
- データのキャッシュ戦略
- 仮想スクロールの導入（投稿一覧、KPIコンソールなど）
- `useMemo`、`useCallback`の活用
- コード分割（Code Splitting）
- API呼び出しの並列化（`Promise.all`の活用）

### 4. アクセシビリティの向上
**問題**: アクセシビリティ対応が不十分

**解決策**:
- `aria-label`の追加
- キーボードナビゲーションの改善
- スクリーンリーダー対応
- コントラスト比の改善
- グラフのアクセシビリティ改善

### 5. テストの追加
**問題**: テストコードが不足している可能性

**解決策**:
- ユニットテストの追加
- 統合テストの追加
- E2Eテストの追加

### 6. コードの重複削減
**問題**: 同じロジックが複数のページで重複している

**今後の改善**:
1. **ラボページのスケジュール生成ロジック**
   - `feed/page.tsx`, `reel/page.tsx`, `story/page.tsx`のスケジュール生成ロジックを共通化

2. **型定義の統一**
   - 残りのAPIルートでも共通型定義を使用する
   - `src/types/analytics.ts`: 分析関連の型定義を集約（必要に応じて）
   - 各APIルートから型定義をエクスポートし、フロントエンドで再利用

### 7. APIレスポンス型定義の統一
**問題**: 同じAPIのレスポンス型が複数の場所で定義されている

**解決策**:
- APIルートファイルで型定義をエクスポート
- フロントエンドでAPIルートから型をインポートして使用
- 型定義の一元管理

### 8. 未使用コードの整理
**今後の改善**:
- ESLintの`no-unused-vars`ルールを厳格化
- 定期的な未使用コードの削除

---

## 優先度別の改善ロードマップ

### Phase 3: 品質向上（2-3ヶ月）
1. アクセシビリティの向上
2. テストの追加
3. ドキュメントの整備
4. URLパラメータとの同期（投稿一覧ページ）
