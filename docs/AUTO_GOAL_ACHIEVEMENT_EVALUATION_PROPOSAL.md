# AI自動目標達成評価の提案

作成日: 2026-01-30

## 問題点

現在の課題：
- 分析ページでユーザーが手動で「満足/不満足」を選択している
- 主観的な判断になりがちで、計画内容や目標との整合性が考慮されていない
- 「満足/不満足」という名前が、他のページの「成功/改善」と統一されていない

## 提案：AI自動目標達成評価

### 1. AIが自動で目標達成見込みを評価

#### 評価基準
- **計画内容（plan）**: 運用計画の目標（フォロワー増加、エンゲージメント向上など）
- **今月のAI方針（ai_direction）**: メインテーマ、優先KPI、避けるべき焦点、投稿ルール
- **投稿パフォーマンス**: リーチ、いいね、コメント、保存、シェアなどの数値
- **投稿内容**: 投稿文、ハッシュタグ、投稿タイプ

#### 評価結果
- **目標達成見込み: 高** - 計画や今月の方針に沿っており、目標達成が見込める
- **目標達成見込み: 中** - 部分的に計画に沿っているが、改善の余地がある
- **目標達成見込み: 低** - 計画や今月の方針から乖離しており、目標達成が困難

### 2. 名前の統一

#### 分析ページ
- **変更前**: 「満足/不満足」
- **変更後**: 「目標達成見込み: 高/中/低」

#### 他のページ（学習ダッシュボードなど）
- **変更前**: 「成功/改善」
- **変更後**: 「目標達成見込み: 高/中/低」または「計画整合性: 良好/要改善」

### 3. 実装の詳細

#### `/api/ai/post-insight`の拡張
- 既に`ai_direction`と`plan`を参照している
- これらを基に、目標達成見込みを自動評価
- 評価結果を`goalAchievementProspect`として返す

#### 評価ロジック
```typescript
interface GoalAchievementEvaluation {
  prospect: "high" | "medium" | "low"; // 目標達成見込み
  reason: string; // 評価理由
  alignmentWithPlan: boolean; // 計画との整合性
  alignmentWithDirection: boolean; // 今月の方針との整合性
  metrics: {
    reach: number;
    engagement: number;
    saves: number;
    // ... その他の指標
  };
}
```

#### UIの変更
- 「満足/不満足」の選択ボタンを削除
- AIが自動評価した「目標達成見込み」を表示
- ユーザーは評価結果を確認し、必要に応じてメモを追加

### 4. データ構造の変更

#### `ai_post_feedback`コレクション
```typescript
{
  userId: string;
  postId: string;
  goalAchievementProspect: "high" | "medium" | "low"; // 新規（AI自動評価）
  sentiment: "positive" | "negative" | "neutral"; // 後方互換性のため残す（非推奨）
  comment: string; // メモ（ユーザー入力）
  aiEvaluationReason: string; // AI評価の理由
  createdAt: Timestamp;
}
```

### 5. メリット

1. **客観性**: 計画内容と目標に基づいた客観的な評価
2. **一貫性**: 計画や今月の方針との整合性を自動でチェック
3. **効率性**: ユーザーが手動で選択する必要がなくなる
4. **学習精度向上**: より正確な評価データが蓄積され、AIの学習精度が向上
5. **名前の統一**: 「満足/不満足」「成功/改善」が統一され、ユーザーが理解しやすくなる

### 6. 実装の優先順位

1. **Phase 1**: `/api/ai/post-insight`に目標達成見込み評価ロジックを追加
2. **Phase 2**: 分析ページのUIを変更（「満足/不満足」→「目標達成見込み」）
3. **Phase 3**: データ構造の変更（`ai_post_feedback`に`goalAchievementProspect`を追加）
4. **Phase 4**: 他のページの「成功/改善」を統一的な名前に変更

