# AIヒント機能の再実装提案

作成日: 2026-02-07

## 背景

以前あった「AIヒント」機能（投稿文やハッシュタグに沿った写真のアドバイスや動画の起承転結の構成アドバイス）は、画像や動画を分析できないため削除されました。しかし、営業から「やっぱりあった方がいい」というフィードバックがあり、再実装を検討しています。

## 課題

- **画像・動画を分析できない**: 実際の画像や動画ファイルを分析してアドバイスすることはできない
- **提案しなければ寂しい**: 何も提案がないと、ユーザーが困る
- **提案しても分析できない**: 提案しても実際の画像を分析できないため、精度に不安がある

## 解決策の方向性

**テキストベースの推奨事項を提供する**

画像や動画を直接分析するのではなく、以下の情報から推測してアドバイスを提供：

1. **投稿文の内容**（テキスト）
2. **ハッシュタグ**
3. **投稿タイプ**（フィード/リール/ストーリー）
4. **ビジネス情報**（業種、ターゲット市場など）
5. **過去の成功パターン**（学習データ）
6. **今月のAI方針**（ai_direction）
7. **投稿予定日時**（時間帯、曜日など）

## 提案内容

### 1. 「ビジュアル推奨事項」セクション

**名称**: 「ビジュアル推奨事項」または「画像・動画の推奨事項」

**表示タイミング**:
- 投稿文が生成された後
- 投稿文が入力された後（手動入力の場合）

**提案内容**:

#### フィード投稿の場合
```
【推奨される画像の特徴】
- 雰囲気: 明るく親しみやすい（投稿文のトーンから推測）
- 構図: 商品が中央に配置された構図が効果的
- 色合い: ブランドカラー（#FF8A15）を取り入れると統一感が出ます
- テキストオーバーレイ: 投稿文の要点を1行で画像に重ねると効果的です

【避けるべき要素】
- 暗い雰囲気の画像（投稿文のトーンと不一致）
- 文字が多すぎる画像（視認性が低下）
```

#### リール投稿の場合
```
【推奨される動画構成】
- オープニング（0-3秒）: 視覚的にインパクトのあるシーンで視聴者の注意を引く
- 展開（3-10秒）: 投稿文の内容を視覚的に表現（商品の使用シーンなど）
- 転換（10-15秒）: 投稿文の要点を強調（テキストオーバーレイなど）
- クロージング（15-30秒）: CTA（フォロー、保存など）を表示

【推奨される要素】
- 明るい照明
- 動きのあるシーン（商品の使用シーンなど）
- テキストオーバーレイで要点を強調
- 音楽は投稿文のトーンに合わせた明るい曲調
```

#### ストーリー投稿の場合
```
【推奨される構成】
- 1枚目: 投稿文の要点をテキストで表示
- 2枚目以降: 視覚的なコンテンツ（商品画像、使用シーンなど）
- 最後: CTA（DM、プロフィールリンクなど）

【推奨される要素】
- 明るく鮮やかな色合い
- 読みやすいフォントサイズ（ストーリーは縦画面）
- ブランドカラーを取り入れたデザイン
```

### 2. 学習データの活用

過去の成功パターンから推測：

```
【過去の成功パターンから】
類似の投稿文（「新商品紹介」）で効果的だった画像の特徴：
- 商品が中央に配置された構図
- 明るい照明
- ブランドカラー（#FF8A15）を取り入れたデザイン
- テキストオーバーレイで商品名を強調

これらの特徴を取り入れると、エンゲージメント率が平均20%向上する傾向があります。
```

### 3. コンテキストベースの提案

投稿予定日時、ハッシュタグ、ビジネス情報から推測：

```
【投稿タイミングから】
- 投稿予定: 2026年2月7日（金）19:00
- 推奨: 平日夜の投稿には、リラックスした雰囲気の画像が効果的です
- ハッシュタグ「#日常」から: カジュアルで親しみやすい画像が適しています
```

### 4. 段階的な提案

**レベル1: 基本的な推奨事項**（常に表示）
- 投稿文のトーンから推測した雰囲気
- 投稿タイプに応じた基本的な構成

**レベル2: 詳細な推奨事項**（学習データがある場合）
- 過去の成功パターンから推測
- より具体的なアドバイス

**レベル3: 高度な推奨事項**（ai_directionがある場合）
- 今月のAI方針に沿った推奨事項
- 優先KPIに合わせた提案

## 実装案

### API設計

**エンドポイント**: `/api/ai/visual-suggestions`

**リクエスト**:
```typescript
{
  content: string; // 投稿文
  hashtags: string[]; // ハッシュタグ
  postType: "feed" | "reel" | "story"; // 投稿タイプ
  scheduledDate?: string; // 投稿予定日
  scheduledTime?: string; // 投稿予定時刻
  userId: string; // ユーザーID（コンテキスト取得用）
}
```

**レスポンス**:
```typescript
{
  success: true;
  data: {
    suggestions: {
      atmosphere: string; // 雰囲気（例: "明るく親しみやすい"）
      composition: string; // 構図（例: "商品が中央に配置された構図"）
      colorScheme: string; // 色合い（例: "ブランドカラーを取り入れる"）
      textOverlay?: string; // テキストオーバーレイの推奨
      avoidElements?: string[]; // 避けるべき要素
      videoStructure?: { // リールの場合
        opening: string;
        development: string;
        twist: string;
        conclusion: string;
      };
      storyStructure?: { // ストーリーの場合
        slides: Array<{ order: number; content: string; }>;
      };
      rationale?: string; // 推奨理由
      basedOnLearning?: boolean; // 学習データに基づいているか
    };
  };
}
```

### UI設計

**表示場所**: `PostEditor.tsx`の投稿文生成後、または投稿文入力後

**表示形式**:
```
┌─────────────────────────────────────┐
│ 📸 ビジュアル推奨事項                │
├─────────────────────────────────────┤
│ 【推奨される画像の特徴】              │
│ • 雰囲気: 明るく親しみやすい         │
│ • 構図: 商品が中央に配置された構図   │
│ • 色合い: ブランドカラーを取り入れる  │
│                                      │
│ 【過去の成功パターンから】           │
│ 類似の投稿文で効果的だった特徴:      │
│ • 商品が中央に配置された構図        │
│ • 明るい照明                         │
│ • テキストオーバーレイで商品名を強調  │
│                                      │
│ 💡 これらの特徴を取り入れると、      │
│    エンゲージメント率が平均20%向上    │
└─────────────────────────────────────┘
```

### プロンプト設計

```typescript
const prompt = `あなたはInstagram運用のビジュアルアドバイザーです。
以下の情報から、最適な画像・動画の推奨事項を提案してください。

【投稿情報】
- 投稿文: ${content}
- ハッシュタグ: ${hashtags.join(", ")}
- 投稿タイプ: ${postType}
- 投稿予定: ${scheduledDate} ${scheduledTime}

【ビジネス情報】
- 業種: ${businessInfo.industry}
- ターゲット市場: ${businessInfo.targetMarket.join(", ")}
- ブランドカラー: #FF8A15

${learningData ? `【過去の成功パターン】
${learningData}` : ""}

${aiDirection ? `【今月のAI方針】
- メインテーマ: ${aiDirection.mainTheme}
- 優先KPI: ${aiDirection.priorityKPI}
- 避けるべき焦点: ${aiDirection.avoidFocus.join(", ")}` : ""}

【出力形式】
以下のJSON形式で出力してください：
{
  "atmosphere": "推奨される雰囲気（1-2文）",
  "composition": "推奨される構図（1-2文）",
  "colorScheme": "推奨される色合い（1-2文）",
  "textOverlay": "テキストオーバーレイの推奨（任意）",
  "avoidElements": ["避けるべき要素1", "避けるべき要素2"],
  ${postType === "reel" ? `"videoStructure": {
    "opening": "オープニング（0-3秒）の推奨",
    "development": "展開（3-10秒）の推奨",
    "twist": "転換（10-15秒）の推奨",
    "conclusion": "クロージング（15-30秒）の推奨"
  },` : ""}
  ${postType === "story" ? `"storyStructure": {
    "slides": [
      {"order": 1, "content": "1枚目の推奨内容"},
      {"order": 2, "content": "2枚目の推奨内容"}
    ]
  },` : ""}
  "rationale": "推奨理由（1-2文）"
}`;
```

## メリット

1. **実用的**: 画像や動画を分析できなくても、テキストベースで実用的なアドバイスを提供できる
2. **学習データの活用**: 過去の成功パターンから推測することで、精度を向上できる
3. **コンテキストの活用**: 投稿文、ハッシュタグ、ビジネス情報などから推測することで、より適切なアドバイスを提供できる
4. **段階的な改善**: 学習データが増えるにつれて、より精度の高いアドバイスを提供できる
5. **ユーザー満足度**: 何も提案がないより、テキストベースでもアドバイスがある方がユーザー満足度が高い

## デメリット・注意点

1. **精度の限界**: 実際の画像を分析できないため、精度には限界がある
2. **一般的なアドバイス**: 具体的な画像を提案できないため、一般的なアドバイスになりがち
3. **学習データの依存**: 学習データがない場合、基本的なアドバイスしか提供できない
4. **成果の保証**: この提案は参考情報であり、投稿の成果（エンゲージメント率向上、フォロワー増加など）を保証するものではありません。実際の成果は、投稿内容、タイミング、ターゲット層など様々な要因に依存します。

## 実装優先度

**高**: 営業からのフィードバックがあり、ユーザー満足度向上に寄与する可能性が高い

## 次のステップ

1. この提案をレビュー
2. APIエンドポイントの実装
3. UIの実装
4. テスト・改善

