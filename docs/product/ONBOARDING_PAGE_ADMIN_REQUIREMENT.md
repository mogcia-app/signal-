# /onboardingページ改修要件

**作成日**: 2025年1月
**対象**: Admin開発チーム

## 概要

`/onboarding`ページを改修し、商品・サービス情報の編集のみをユーザーに許可し、その他の情報はadminで入力した内容を表示するように変更します。

## 現状

現在の`/onboarding`ページでは、ユーザーが以下の情報を入力・編集できます：

1. **ステップ1: ビジネス情報**
   - 業種
   - 会社規模
   - 事業形態
   - ターゲット市場
   - キャッチコピー
   - 事業内容
   - 利用開始日時点のフォロワー数
   - **商品・サービス情報** ← これは編集可能のまま

2. **ステップ2: 目標・課題**
   - 目標（複数選択可）
   - 課題（複数選択可）

3. **ステップ3: Instagram AI設定**
   - トーン
   - マナー・ルール
   - 注意事項・NGワード
   - 目標・目的
   - モチベーション・想い
   - 追加情報・その他

4. **パスワード変更**

## 変更後の要件

### ユーザーが編集可能な項目

**商品・サービス情報のみ**を編集可能にします。

- 商品・サービス名の追加・編集・削除
- 商品・サービスの詳細の追加・編集・削除
- 価格（税込）の追加・編集・削除

### Adminで入力・管理する項目（表示のみ）

以下の項目は、adminで入力した内容を表示するのみとし、ユーザーは編集できません：

1. **ビジネス情報**
   - 業種
   - 会社規模
   - 事業形態
   - ターゲット市場
   - キャッチコピー
   - 事業内容
   - 利用開始日時点のフォロワー数

2. **目標・課題**
   - 目標（複数選択可）
   - 課題（複数選択可）

3. **Instagram AI設定**
   - トーン
   - マナー・ルール
   - 注意事項・NGワード
   - 目標・目的
   - モチベーション・想い
   - 追加情報・その他

### その他の機能

- **ユーザー情報セクション**: 表示のみ（変更なし）
- **パスワード変更**: 機能は維持（変更なし）

## UI/UXの変更

### 表示モード

- ビジネス情報、目標・課題、Instagram AI設定は**読み取り専用**として表示
- 編集ボタンや入力フィールドは表示しない
- adminで入力した内容をそのまま表示

### 編集可能セクション

- **商品・サービス情報**セクションのみ編集可能
- 現在のUI（追加・編集・削除機能）を維持

### ステップ表示の削除

- 3ステップのウィザード形式を削除
- プログレスバーを削除
- ステップ1/2/3の切り替えを削除
- すべての情報を1画面で表示

## データフロー

### Admin側の実装

1. **Admin画面でユーザー情報を入力・編集**
   - ビジネス情報
   - 目標・課題
   - Instagram AI設定
   - これらの情報をFirestoreの`users`コレクションに保存

2. **データ構造**
   ```typescript
   {
     businessInfo: {
       industry: string,
       companySize: string,
       businessType: string,
       targetMarket: string[],
       catchphrase: string,
       description: string,
       initialFollowers: number,
       // productsOrServices はユーザーが編集可能
       productsOrServices: Array<{
         id: string,
         name: string,
         details: string,
         price?: string
       }>
     },
     goals: string[],
     challenges: string[],
     snsAISettings: {
       instagram: {
         enabled: boolean,
         tone: string,
         manner: string,
         cautions: string,
         goals: string,
         motivation: string,
         additionalInfo: string
       }
     }
   }
   ```

### フロントエンド側の実装

1. **データの読み込み**
   - `useUserProfile`フックからユーザープロファイルを取得
   - adminで入力された情報を表示

2. **商品・サービス情報の編集**
   - 現在の実装を維持
   - 追加・編集・削除機能を維持
   - Firestoreの`users/{userId}/businessInfo/productsOrServices`を更新

3. **保存処理**
   - 商品・サービス情報のみを保存
   - 他の情報は保存しない（読み取り専用）

## 実装チェックリスト

### Admin側

- [ ] Admin画面でユーザーのビジネス情報を入力・編集できる機能を実装
- [ ] Admin画面でユーザーの目標・課題を入力・編集できる機能を実装
- [ ] Admin画面でユーザーのInstagram AI設定を入力・編集できる機能を実装
- [ ] 入力した情報をFirestoreの`users`コレクションに保存

### フロントエンド側

- [ ] ステップ1/2/3のウィザード形式を削除
- [ ] プログレスバーを削除
- [ ] ビジネス情報セクションを読み取り専用に変更
- [ ] 目標・課題セクションを読み取り専用に変更
- [ ] Instagram AI設定セクションを読み取り専用に変更
- [ ] 商品・サービス情報セクションのみ編集可能のまま維持
- [ ] 編集モードの切り替え機能を削除（商品・サービス情報は常に編集可能）
- [ ] データ保存時に商品・サービス情報のみを保存するように変更

## 注意事項

1. **既存データの互換性**
   - 既存のユーザーデータとの互換性を確保
   - 既存データが存在する場合は、そのまま表示

2. **権限管理**
   - Adminのみがビジネス情報、目標・課題、Instagram AI設定を編集可能
   - ユーザーは商品・サービス情報のみ編集可能

3. **エラーハンドリング**
   - Adminで入力されていない情報がある場合の表示方法を検討
   - 「未設定」などの適切な表示を実装

4. **UIの一貫性**
   - 読み取り専用セクションは、編集可能セクションと視覚的に区別できるようにする
   - 例：背景色を変える、アイコンを追加するなど

## 参考ファイル

- `src/app/onboarding/page.tsx` - 現在の実装
- `src/hooks/useUserProfile.ts` - ユーザープロファイル取得フック
- `src/app/api/user/business-info/route.ts` - ビジネス情報API（参考）

## 質問・確認事項

1. Admin画面の実装スケジュールは？
2. Admin画面のUIデザインは？
3. 商品・サービス情報の編集権限はユーザーのみで問題ないか？
4. 既存ユーザーのデータ移行は必要か？

