# 削除候補コレクション

## 調査結果

### 月次レポートでの使用状況

#### 1. `ai_overview_history` ⚠️ 削除候補
- **月次レポートでの使用**: `OverviewHistorySection.tsx` で使用
- **実際の使用**: コンポーネントは存在するが、表示されていない可能性
- **削除可否**: ✅ **削除可能**（使用されていない、または非表示）

#### 2. `userSchedules` ✅ 削除候補
- **月次レポートでの使用**: **使用されていない**
- **他の機能での使用**: `/api/instagram/schedule-save` で使用
- **削除可否**: ⚠️ **要確認**（他の機能で使用されているため、月次レポートからは削除可能）

#### 3. `ai_master_context_cache` ⚠️ 削除候補
- **月次レポートでの使用**: `masterContext` として使用
- **実際の使用**: 学習フェーズ、RAGヒット率などの表示
- **削除可否**: ⚠️ **要確認**（キャッシュなので削除しても再生成可能、ただし表示に影響）

## シンプル化提案に基づく削除候補

### パフォーマンス評価・PDCA実行度のみに簡素化する場合

以下のコレクションは**不要**になります：

1. ❌ `ai_overview_history` - 履歴表示が不要
2. ❌ `ai_master_context_cache` - マスターコンテキストが不要
3. ❌ `userSchedules` - スケジュール分析が不要
4. ❌ `ai_post_feedback` - フィードバック感情分析が不要（パフォーマンス評価には不要）
5. ❌ `ai_action_logs` - アクションログが不要（PDCA実行度には不要）
6. ❌ `postPerformanceSnapshots` - スナップショットが不要
7. ❌ `ab_tests` - A/Bテストが不要

### 必要なコレクション（最小限）

1. ✅ `analytics` - KPI計算に必要
2. ✅ `posts` - 投稿数計算に必要
3. ✅ `plans` - 計画の有無確認に必要

## 推奨アクション

### ステップ1: 使用状況の最終確認
```bash
# 各コレクションの使用箇所を確認
grep -r "ai_overview_history" src/
grep -r "userSchedules" src/
grep -r "ai_master_context_cache" src/
```

### ステップ2: 削除対象の決定
シンプル化提案に基づき、以下を削除：
- パフォーマンス評価・PDCA実行度に不要なコレクション
- 使用されていないコレクション

### ステップ3: 削除の実行
1. データのバックアップ
2. 開発環境でテスト
3. 本番環境で削除

## 注意事項

⚠️ **削除前に確認**
- 他の機能で使用されていないか
- データのバックアップを取る
- 段階的に削除（一度に全部削除しない）

