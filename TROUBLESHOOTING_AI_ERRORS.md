# iPad/MacでのAI出力エラー対策ガイド

## 🔍 よくある問題と解決策

### 1. **SafariでのJavaScript実行エラー**
**症状**: AIチャットでエラーメッセージが表示される
**解決策**:
- Safariの設定 → プライバシーとセキュリティ → JavaScriptを有効にする
- Safariを最新版に更新
- キャッシュとCookieをクリア

### 2. **ネットワークタイムアウト**
**症状**: 「リクエストがタイムアウトしました」エラー
**解決策**:
- WiFi接続を確認
- モバイルデータの場合は電波状況を確認
- ページを再読み込みして再試行

### 3. **レスポンス形式エラー**
**症状**: 「レスポンス形式エラーが発生しました」エラー
**解決策**:
- ブラウザを完全に閉じて再起動
- Safariの設定をリセット
- 他のブラウザ（Chrome、Firefox）で試す

## 🛠️ 技術的改善内容

### フロントエンド（ai-chat-widget.tsx）
- **ブラウザ検出**: Safari/iOSの自動検出
- **タイムアウト調整**: Safariでは60秒、その他は30秒
- **エラーハンドリング強化**: 具体的なエラーメッセージ
- **AbortController**: リクエストの適切なキャンセル

### バックエンド（api/ai/chat/route.ts）
- **レスポンスヘッダー**: Safari互換のヘッダー設定
- **キャッシュ制御**: 適切なキャッシュヘッダー
- **ブラウザ情報**: デバッグ用のブラウザ情報収集

## 📱 デバイス別推奨設定

### iPad
- Safari 15.0以上を推奨
- JavaScript有効化必須
- プライベートブラウジングモードは避ける

### Mac
- Safari 15.0以上またはChrome/Firefox最新版
- システムの自動更新を有効化
- ファイアウォール設定を確認

## 🔧 トラブルシューティング手順

1. **ブラウザの更新**
2. **キャッシュクリア**
3. **JavaScript有効化確認**
4. **ネットワーク接続確認**
5. **他のブラウザでテスト**

## 📞 サポート

問題が解決しない場合は、以下を確認してください：
- ブラウザのバージョン
- エラーメッセージの詳細
- 発生する操作の手順
- デバイスのOSバージョン
